<script type="text/javascript" src="https://unpkg.com/gold-exchange"></script>
<script>
    let newCurrency = [
        { symbol: 'g', value: 1000 },
        { symbol: 'e', value: 100 },
        { symbol: 's', value: 10 },
        { symbol: 'c', value: 1 }
    ];
    let exchanger = new this["gold-exchange"].Exchanger({ rate: 1/50, newCurrency: newCurrency });

    let getInput = () => {
        return document.getElementById("input").value;
    }

    let setOutput = (output) => {
        let display = document.getElementById("demo");
        display.textContent = output;
    }

    let parseInput = (input) => {
        let inputCoins = new Map();
        input = input.toLowerCase().split(' ');
        input.forEach( (i) => {
            let symbol = i.match(/[a-z]/);
            if (symbol) {
                let quantity = parseInt(i);
                if (inputCoins.has(symbol)) {
                    inputCoins.set(symbol, inputCoins.get(symbol) + quantity);
                } else {
                    inputCoins.set(symbol, quantity);
                }
            }
        })
        let coins = [];
        inputCoins.forEach( (quantity, symbol) => {
            coins.push({ symbol: symbol[0], quantity: quantity });
        })
        return coins;
    };

    let parseCoins = (coins) => {
        return coins.reduce( (output, coin) => {
            return output += `${coin.quantity}${coin.symbol} `;
        }, '');
    }

    let exchangeCoins = (input) => {
        let coins = parseInput(input);
        let newCoins = exchanger.exchange(coins);
        let output = parseCoins(newCoins);

        setOutput(output);
    }

    let beginExchange = () => {
        let input = getInput();
        exchangeCoins(input);
    }

</script>

<input type="text" id="input" oninput="beginExchange()" />

<div id="demo"></div>